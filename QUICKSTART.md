# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram API
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```env
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash  
TELEGRAM_PHONE=+1234567890
CHANNEL_NAME=your_channel_name
```

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å API –¥–∞–Ω–Ω—ã–µ:
1. –ò–¥–∏—Ç–µ –Ω–∞ https://my.telegram.org/apps
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `api_id` –∏ `api_hash`

## 3. –ó–∞–ø—É—Å–∫

### –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (Telegram + WebSocket):
```bash
python run.py
```

### –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
```bash
python test_integration.py
```

### –¢–æ–ª—å–∫–æ OHLCV –ø–æ—Ç–æ–∫–∏:
```bash
python ws_ohlcv_manager.py
```

## 4. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

1. **run.py** –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Telegram –∏ —Å–ª—É—à–∞–µ—Ç –∫–∞–Ω–∞–ª
2. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `` `BTCUSDT` `` –ø–µ—Ä–µ–¥–∞–µ—Ç –∏—Ö –Ω–∞–ø—Ä—è–º—É—é –≤ StreamManager
3. **StreamManager** –∑–∞–ø—É—Å–∫–∞–µ—Ç WebSocket –ø–æ—Ç–æ–∫–∏ –∫ Binance –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
4. –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É –≤—ã–≤–æ–¥—è—Ç—Å—è OHLCV –±–∞—Ä—ã:
   ```
   üöÄ Starting stream for BTCUSDT
   BTCUSDT 15:30:45 O:43250.5 H:43251.0 L:43249.8 C:43250.2 V:1.234 N:15
   ‚èπÔ∏è Stopped BTCUSDT (TTL expired)
   ```

### –¢–µ—Å—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

#### –¢–µ—Å—Ç —Ç–æ–ª—å–∫–æ OHLCV –º–µ–Ω–µ–¥–∂–µ—Ä–∞:
```bash
python test_ohlcv_only.py
```

#### –¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–±–µ–∑ Telegram):
```bash
python test_direct_integration.py
```

## 5. –û—Å—Ç–∞–Ω–æ–≤–∫–∞
–ù–∞–∂–º–∏—Ç–µ `Ctrl+C` –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª—é–±–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í `ws_ohlcv_manager.py`:
- `TTL_SECONDS = 30` - –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø–æ—Ç–æ–∫–∞ (—Å–µ–∫—É–Ω–¥—ã)
- `AGG_INTERVAL_SEC = 1` - –∏–Ω—Ç–µ—Ä–≤–∞–ª OHLCV –±–∞—Ä–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)

–í `run.py`:
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ  
- –ú–∏–Ω–∏–º—É–º –ª–æ–≥–æ–≤ –¥–ª—è —á–∏—Å—Ç–æ–≥–æ –≤—ã–≤–æ–¥–∞
